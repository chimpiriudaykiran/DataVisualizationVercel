<!DOCTYPE html>
<html lang="en" >

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" type="image/x-icon" href="./static/img/favicon.ico">

  <title>Data Visualization</title>

  <link rel="stylesheet" href="./static/css/normalize.min.css">
  <script src="./static/js/prefixfree.min.js"></script>
  <link rel="stylesheet" href="./static/css/w3.css">
  <link rel="stylesheet" href="./static/css/logo.css">
  <style>
      .w3-theme {
          color: #fff !important;
          background-color: #122047 !important
      }
  </style>
  
  <!-- Custom fonts for this template-->
  <link href="./static/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

  <!-- Custom styles for this template-->
  <link href="./static/css/sb-admin-2.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./static/css/darkmode.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="./static/css/loading.css">
    <link rel="stylesheet" href="./static/css/slider.css">
    <link href="https://fonts.googleapis.com/css?family=Oleo+Script" rel="stylesheet"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel="stylesheet" href="./static/css/darkmode.css">
    <script src="./static/js/script.js"></script>
</head>

<body id="page-top" style="overflow: hidden" onload="initializeIndex()">

  <!-- Page Wrapper -->
  <div id="wrapper">

    <div id="navbar" class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion toggled" style="background-color: #122047; background-image: linear-gradient(180deg,#102153 10%,#101520 100%); background-size: cover;">
        <!-- Sidebar -->
        <ul id="accordionSidebar" style="list-style-type:none; padding: 0px;">
            <!-- Nav Item - Dashboard -->
            <li class="nav-item active">
                <a class="nav-link" href="#">
                    <i class="fas fa-fw fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <!-- Divider -->
            <hr class="sidebar-divider">
            <!-- Heading -->
            <div class="sidebar-heading">Visualization</div>
            <!-- Nav Item - Charts -->
            <li class="nav-item">
                <a class="nav-link" href="home">
                    <i class="fas fa-fw fa-chart-area"></i>
                    <span>Charts</span>
                </a>
            </li>
            <!-- Nav Item - Tables -->
            <li class="nav-item">
                <a class="nav-link" href="table">
                    <i class="fas fa-fw fa-table"></i>
                    <span>Tables</span>
                </a>
            </li>
            <!-- Divider -->
            <hr class="sidebar-divider d-none d-md-block">
            <li class="nav-item">
              <a class="nav-link" id="helpButton" data-bs-toggle="modal" href="#" data-bs-target="#helpModal" onclick="readHelp()">
                  <i class="fas fa-fw fa-question"></i>
                  <span>Help</span>
              </a>
          </li>
        </ul>
          <div style="flex: 1;"></div>
          <div id="darkmode-toggle-container" style="z-index: 3;">
            <input type="checkbox" id="darkmode-toggle" onchange="toggleTheme(this)" onload="toggleTheme(this)" value=""/>
            <label for="darkmode-toggle" id="darkmode-toggle-label">
              <svg version="1.1" class="sun" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 496 496" style="enable-background:new 0 0 496 496;" xml:space="preserve">
            
                <rect x="152.994" y="58.921" transform="matrix(0.3827 0.9239 -0.9239 0.3827 168.6176 -118.5145)" width="40.001" height="16" />
                <rect x="46.9" y="164.979" transform="matrix(0.9239 0.3827 -0.3827 0.9239 71.29 -12.4346)" width="40.001" height="16" />
                <rect x="46.947" y="315.048" transform="matrix(0.9239 -0.3827 0.3827 0.9239 -118.531 50.2116)" width="40.001" height="16" />
            
                <rect x="164.966" y="409.112" transform="matrix(-0.9238 -0.3828 0.3828 -0.9238 168.4872 891.7491)" width="16" height="39.999" />
            
                <rect x="303.031" y="421.036" transform="matrix(-0.3827 -0.9239 0.9239 -0.3827 50.2758 891.6655)" width="40.001" height="16" />
            
                <rect x="409.088" y="315.018" transform="matrix(-0.9239 -0.3827 0.3827 -0.9239 701.898 785.6559)" width="40.001" height="16" />
            
                <rect x="409.054" y="165.011" transform="matrix(-0.9239 0.3827 -0.3827 -0.9239 891.6585 168.6574)" width="40.001" height="16" />
                <rect x="315.001" y="46.895" transform="matrix(0.9238 0.3828 -0.3828 0.9238 50.212 -118.5529)" width="16" height="39.999" />
                <path d="M248,88c-88.224,0-160,71.776-160,160s71.776,160,160,160s160-71.776,160-160S336.224,88,248,88z M248,392
                    c-79.4,0-144-64.6-144-144s64.6-144,144-144s144,64.6,144,144S327.4,392,248,392z" />
                <rect x="240" width="16" height="72" />
                <rect x="62.097" y="90.096" transform="matrix(0.7071 0.7071 -0.7071 0.7071 98.0963 -40.6334)" width="71.999" height="16" />
                <rect y="240" width="72" height="16" />
            
                <rect x="90.091" y="361.915" transform="matrix(-0.7071 -0.7071 0.7071 -0.7071 -113.9157 748.643)" width="16" height="71.999" />
                <rect x="240" y="424" width="16" height="72" />
            
                <rect x="361.881" y="389.915" transform="matrix(-0.7071 -0.7071 0.7071 -0.7071 397.8562 960.6281)" width="71.999" height="16" />
                <rect x="424" y="240" width="72" height="16" />
                <rect x="389.911" y="62.091" transform="matrix(0.7071 0.7071 -0.7071 0.7071 185.9067 -252.6357)" width="16" height="71.999" />
              </svg>
              <svg version="1.1" class="moon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 49.739 49.739" style="enable-background:new 0 0 49.739 49.739;" xml:space="preserve">
                <path d="M25.068,48.889c-9.173,0-18.017-5.06-22.396-13.804C-3.373,23.008,1.164,8.467,13.003,1.979l2.061-1.129l-0.615,2.268
                   c-1.479,5.459-0.899,11.25,1.633,16.306c2.75,5.493,7.476,9.587,13.305,11.526c5.831,1.939,12.065,1.492,17.559-1.258v0
                   c0.25-0.125,0.492-0.258,0.734-0.391l2.061-1.13l-0.585,2.252c-1.863,6.873-6.577,12.639-12.933,15.822
                   C32.639,48.039,28.825,48.888,25.068,48.889z M12.002,4.936c-9.413,6.428-12.756,18.837-7.54,29.253
                   c5.678,11.34,19.522,15.945,30.864,10.268c5.154-2.582,9.136-7.012,11.181-12.357c-5.632,2.427-11.882,2.702-17.752,0.748
                   c-6.337-2.108-11.473-6.557-14.463-12.528C11.899,15.541,11.11,10.16,12.002,4.936z" />
              </svg>
            </label>
          </div>
        </div>
<div style="display: flex; flex-direction: column; margin-left: 6.5rem;width: 100%;">
<div class="stroketext">
    <div style="z-index: -10">
        <div class="star-wrapper">
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
            <div class="star"></div>
        </div>
        <div class="cross-wrapper">
            <div class="cross"></div>
            <div class="cross"></div>
            <div class="cross"></div>
            <div class="cross"></div>
            <div class="cross"></div>
            <div class="cross"></div>
            <div class="cross"></div>
            <div class="cross"></div>
            <div class="cross"></div>
            <div class="cross"></div>
            <div class="cross"></div>
            <div class="cross"></div>
            <div class="cross"></div>
            <div class="cross"></div>
            <div class="cross"></div>
        </div>
    </div>
    <svg width="100%" style="position: absolute;">
        <text x="50%" y="50%">Data Visualization</text>
    </svg>
    <div class="title" data-text="Data Visualization"></div>
</div>

<div style="position: absolute;z-index: 10;display: flex;flex-direction: column;width: calc(100% - 6.5rem);height: 100%;justify-content: flex-end;align-items: center;align-content: center;flex-wrap: wrap;">
    <div class="container-text w3-theme w3-round-xxlarge" style="min-height: 40px; min-width: 120px; max-width: 90%;margin-bottom: 20px; text-align: center;">
        <p id="recognizedText" align="center" style="padding-right: 10px;padding-left: 10px;position: relative;font-family:'Fredoka One', cursive;text-align: center!important;white-space: normal;overflow-wrap: anywhere;top: 50%;left: 50%;transform: translate(-50%, -50%);">You can see the recognized text here</p>
    </div>       
    <p style="font-size: 30px; margin: 20px; font-family:'Fredoka One', cursive">Hold Space to speak when you are in recognition mode</p>
</div>

    </div>



  </div>
  <!-- Bootstrap core JavaScript-->
  <script src="./static/vendor/jquery/jquery.min.js"></script>
  <script src="./static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->
  <script src="./static/vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for all pages-->
  <script src="./static/js/sb-admin-2.min.js"></script>



  <!-- <script>
    const p = document.getElementById('recognizedtext');
    console.log(p);
    let isSpeaking = false;
    let readfiles = true;
    let filenumber = 0;
    let readgraph = true;
    let graphtype = 0;

    

    const recognition = new SpeechRecognition();
    recognition.interimResults = true;
    recognition.lang = 'en-US';

    // let p = document.createElement("p");
    const files = ["wine_dataset.xlsx", "shopping_trends_updated.csv"]; // Simulated file list
    const visualizationTypes = ["Bar graph", "Pie", "Scatter", "Line", "Histogram"];

    recognition.addEventListener("result", (e) => {
        let text = Array.from(e.results)
            .map((result) => result[0])
            .map((result) => result.transcript)
            .join("");

        if (e.results[0].isFinal) {
            p.innerText = text;

            if (text.toLowerCase().includes("visualisation") || text.toLowerCase().includes("visualization")) {
                if (readfiles == true) {
                    text = '';
                    listDownloadableFiles(files);
                    console.log(files);
                    readfiles = false;
                }
            }

            if (readfiles == false && filenumber == 0) {
                if (isNaN(parseInt(text.toLowerCase()))) {
                    filenumber = parseInt(wordToNumber(text.toLowerCase()));
                    console.log(filenumber);
                } else {
                    filenumber = parseInt(text.toLowerCase());
                }
                if (!isNaN(filenumber) && filenumber >= 1 && filenumber <= files.length) {
                    speak(`You selected file number ${filenumber}, ${files[filenumber - 1]}.`);
                    text = '';
                    offerVisualizationTypes();
                    readgraph = false;
                }

            }
            if (readgraph == false && graphtype == 0) {
                if (isNaN(parseInt(text.toLowerCase()))) {
                    graphtype = parseInt(wordToNumber(text.toLowerCase()));
                    console.log(graphtype);
                } else {
                    graphtype = parseInt(text.toLowerCase());
                }
                if (!isNaN(graphtype) && graphtype >= 1 && graphtype <= visualizationTypes.length) {
                    speak(`You selected file number ${graphtype}, ${visualizationTypes[graphtype - 1]}.`);
                    text = '';
                    document.cookie = `filename=${files[filenumber - 1]}`;
                    document.cookie = `graphtype=${visualizationTypes[graphtype - 1]}`;
                    p.innerText = "Opening Visualization Page....";
                    console.log(p.innerText);
                    window.top.location = '/home';
                }
            }

        }
    });

    function listDownloadableFiles(files) {
        recognition.stop();
        speak("Listing available files for visualization.");
        files.forEach((file, index) => {
            speak(`${index + 1}: ${file}`);
        });
        setTimeout(() => { // Wait for the speech synthesis to finish
            speak("Please say the number of the file you wish to choose for visualization.");
        }, 5000);
    }

    function offerVisualizationTypes() {
        speak("Please select a visualization type.");
        console.log(visualizationTypes);
        visualizationTypes.forEach((type, index) => {
            speak(`${index + 1}: ${type}`);
        });
    }

    function speak(text) {
        const msg = new SpeechSynthesisUtterance(text);
        msg.onstart = function () {
            isSpeaking = true;
            recognition.stop(); // Ensure to stop recognition while speaking
        };
        msg.onend = function () {
            isSpeaking = false;
            setTimeout(() => {
                recognition.start();
            }, 500);
        };
        window.speechSynthesis.speak(msg);
    }

    // recognition.addEventListener("end", () => {
    //     if (!isSpeaking) {
    //         recognition.start();
    //     }
    // });
    // recognition.start();
</script> -->

</body>

</html>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" type="image/x-icon" href="./static/img/favicon.ico">
    <title>Data Visualization</title>
    <style>
        /* width */
        
         ::-webkit-scrollbar {
            width: 5px;
            height: 5px;
        }
        /* Track */
        
         ::-webkit-scrollbar-track {
            box-shadow: inset 0 0 5px #00000061;
            border-radius: 10px;
        }
        /* Handle */
        
         ::-webkit-scrollbar-thumb {
            background: #2e79aa;
            border-radius: 10px;
        }
        /* Handle on hover */
        
         ::-webkit-scrollbar-thumb:hover {
            background: #091f54;
        }
        
        .w3-theme {
            color: #fff !important;
            background-color: #122047 !important
        }
    </style>
    </style>
    <style>
        .tabs {
            display: flex;
            position: relative;
            background-color: var(--bs-body-bg);
            box-shadow: 2px 4px 13px 0px rgb(0, 123, 255, 0.15);
            padding: 0.75rem;
            border-radius: 99px;
        }
        
        .tabs * {
            z-index: 2;
        }
        
        .container-radio input[type="radio"] {
            display: none;
        }
        
        .tab {
            display: flex;
            align-items: center;
            justify-content: space-evenly;
            min-height: 15px;
            min-width: 100px;
            /* font-size: .8rem; */
            color: var(--bs-body-color);
            /* font-weight: 500; */
            border-radius: 99px;
            cursor: pointer;
            transition: color 0.15s ease-in;
            margin: 0px;
        }
        
        .container-radio input[type="radio"]:checked+label {
            color: #003c96;
        }
        
        .container-radio input[type="radio"]:checked+label>.notification {
            background-color: #003c96;
            color: #fff;
        }
        
        .container-radio input[id="radio-1"]:checked~.glider {
            transform: translate(-250%, -50%);
        }
        
        .container-radio input[id="radio-2"]:checked~.glider {
            transform: translate(-150%, -50%);
        }
        
        .container-radio input[id="radio-3"]:checked~.glider {
            transform: translate(-50%, -50%);
        }
        
        .container-radio input[id="radio-4"]:checked~.glider {
            transform: translate(50%, -50%);
        }
        
        .container-radio input[id="radio-5"]:checked~.glider {
            transform: translate(150%, -50%);
        }
        
        .glider {
            position: absolute;
            display: flex;
            align-items: flex-start;
            justify-content: space-evenly;
            min-height: 20px;
            min-width: 100px;
            background-color: #00000036;
            z-index: 1;
            border-radius: 99px;
            transition: 0.25s ease-out;
            min-height: 25px;
            text-align: center;
            top: 50%;
            left: 50%;
            transform: translate(-250%, -50%);
        }
        
        @media (max-width: 700px) {
            .tabs {
                transform: scale(0.6);
            }
        }
    </style>
    <style>
         :root {
            --plotly-template: seaborn;
        }
        
        iframe body {
            margin: 0;
        }
    </style>
    <link rel="stylesheet" href="./static/css/normalize.min.css">
    <script src="./static/js/prefixfree.min.js"></script>
    <script src="./static/js/script.js"></script>
    <script src="./static/js/home.js"></script>
    <link rel="stylesheet" href="./static/css/w3.css">
    <!-- <link rel="stylesheet" href="./static/css/logo.css"> -->
    <!-- Custom fonts for this template-->
    <link href="./static/vendor/fontawesome-free/css/all.css" rel="stylesheet" type="text/css">
    <link href="./static/vendor/fontawesome-free/css/solid.css" rel="stylesheet" type="text/css">

    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
    <!-- Custom styles for this template-->
    <link href="./static/css/sb-admin-2.min.css" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.3/xlsx.full.min.js"></script>
    <script type="text/javascript">
    </script>
    <!-- Include rc-slider CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="./static/css/loading.css">
    <link rel="stylesheet" href="./static/css/slider.css">
    <link href="https://fonts.googleapis.com/css?family=Oleo+Script" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel="stylesheet" href="./static/css/darkmode.css">
</head>

<body id="page-top" style="overflow: hidden" onload="initializeIndex()">
    <!-- Page Wrapper -->
    <div id="wrapper">
        <div id="navbar" class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion toggled" style="background-color: #122047; background-image: linear-gradient(180deg,#102153 10%,#101520 100%); background-size: cover;">
            <!-- Sidebar -->
            <ul id="accordionSidebar" style="list-style-type:none; padding: 0px;">
                <!-- Nav Item - Dashboard -->
                <li class="nav-item">
                    <a class="nav-link" href="./">
                        <i class="fas fa-fw fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <!-- Divider -->
                <hr class="sidebar-divider">
                <!-- Heading -->
                <div class="sidebar-heading">Visualization</div>
                <!-- Nav Item - Charts -->
                <li class="nav-item">
                    <a class="nav-link" href="home">
                        <i class="fas fa-fw fa-chart-area"></i>
                        <span>Charts</span>
                    </a>
                </li>
                <!-- Nav Item - Tables -->
                <li class="nav-item active">
                    <a class="nav-link" href="#">
                        <i class="fas fa-fw fa-table"></i>
                        <span>Tables</span>
                    </a>
                </li>
                <!-- Divider -->
                <hr class="sidebar-divider d-none d-md-block">
                <li class="nav-item">
                    <a class="nav-link" id="helpButton" data-bs-toggle="modal" href="#" data-bs-target="#helpModal" onclick="readHelp()">
                        <i class="fas fa-fw fa-question"></i>
                        <span>Help</span>
                    </a>
                </li>
            </ul>
            <div style="flex: 1;"></div>
            <div id="darkmode-toggle-container" style="z-index: 3;">
                <input type="checkbox" id="darkmode-toggle" onchange="toggleTheme(this)" onload="toggleTheme(this)" value="" />
                <label for="darkmode-toggle" id="darkmode-toggle-label">
                      <svg version="1.1" class="sun" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 496 496" style="enable-background:new 0 0 496 496;" xml:space="preserve">

                        <rect x="152.994" y="58.921" transform="matrix(0.3827 0.9239 -0.9239 0.3827 168.6176 -118.5145)" width="40.001" height="16" />
                        <rect x="46.9" y="164.979" transform="matrix(0.9239 0.3827 -0.3827 0.9239 71.29 -12.4346)" width="40.001" height="16" />
                        <rect x="46.947" y="315.048" transform="matrix(0.9239 -0.3827 0.3827 0.9239 -118.531 50.2116)" width="40.001" height="16" />

                        <rect x="164.966" y="409.112" transform="matrix(-0.9238 -0.3828 0.3828 -0.9238 168.4872 891.7491)" width="16" height="39.999" />

                        <rect x="303.031" y="421.036" transform="matrix(-0.3827 -0.9239 0.9239 -0.3827 50.2758 891.6655)" width="40.001" height="16" />

                        <rect x="409.088" y="315.018" transform="matrix(-0.9239 -0.3827 0.3827 -0.9239 701.898 785.6559)" width="40.001" height="16" />

                        <rect x="409.054" y="165.011" transform="matrix(-0.9239 0.3827 -0.3827 -0.9239 891.6585 168.6574)" width="40.001" height="16" />
                        <rect x="315.001" y="46.895" transform="matrix(0.9238 0.3828 -0.3828 0.9238 50.212 -118.5529)" width="16" height="39.999" />
                        <path d="M248,88c-88.224,0-160,71.776-160,160s71.776,160,160,160s160-71.776,160-160S336.224,88,248,88z M248,392
                            c-79.4,0-144-64.6-144-144s64.6-144,144-144s144,64.6,144,144S327.4,392,248,392z" />
                        <rect x="240" width="16" height="72" />
                        <rect x="62.097" y="90.096" transform="matrix(0.7071 0.7071 -0.7071 0.7071 98.0963 -40.6334)" width="71.999" height="16" />
                        <rect y="240" width="72" height="16" />

                        <rect x="90.091" y="361.915" transform="matrix(-0.7071 -0.7071 0.7071 -0.7071 -113.9157 748.643)" width="16" height="71.999" />
                        <rect x="240" y="424" width="16" height="72" />

                        <rect x="361.881" y="389.915" transform="matrix(-0.7071 -0.7071 0.7071 -0.7071 397.8562 960.6281)" width="71.999" height="16" />
                        <rect x="424" y="240" width="72" height="16" />
                        <rect x="389.911" y="62.091" transform="matrix(0.7071 0.7071 -0.7071 0.7071 185.9067 -252.6357)" width="16" height="71.999" />
                      </svg>
                      <svg version="1.1" class="moon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 49.739 49.739" style="enable-background:new 0 0 49.739 49.739;" xml:space="preserve">
                        <path d="M25.068,48.889c-9.173,0-18.017-5.06-22.396-13.804C-3.373,23.008,1.164,8.467,13.003,1.979l2.061-1.129l-0.615,2.268
                           c-1.479,5.459-0.899,11.25,1.633,16.306c2.75,5.493,7.476,9.587,13.305,11.526c5.831,1.939,12.065,1.492,17.559-1.258v0
                           c0.25-0.125,0.492-0.258,0.734-0.391l2.061-1.13l-0.585,2.252c-1.863,6.873-6.577,12.639-12.933,15.822
                           C32.639,48.039,28.825,48.888,25.068,48.889z M12.002,4.936c-9.413,6.428-12.756,18.837-7.54,29.253
                           c5.678,11.34,19.522,15.945,30.864,10.268c5.154-2.582,9.136-7.012,11.181-12.357c-5.632,2.427-11.882,2.702-17.752,0.748
                           c-6.337-2.108-11.473-6.557-14.463-12.528C11.899,15.541,11.11,10.16,12.002,4.936z" />
                      </svg>
                    </label>
            </div>
        </div>
        <!-- End of Sidebar -->
        <div id="content" style="margin-left: 6.5rem!important;width: 100%; padding: 10px;">
            <div class="container-fluid shadow-sm p-3 mb-5 bg-white rounded rounded border" style="
            position: relative;
            min-height: 640px;
        ">
                <div style="width: 80%; margin: 0px auto;">
                    <div style="color: white; padding: 10px; border: none; border-radius: 5px; cursor: pointer;">
                        <div class="" aria-disabled="false" style="border: black;position: relative;width: 100%;height: auto;border-width: 1px;border-style: dashed;border-radius: 5px;text-align: center;margin: 5px;">
                            <input type="file" id="upload-data" accept=".csv, application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" hidden/>
                            <button for="upload-data" class="shadow" id="upload-button" style="color: white; background-color: rgb(0, 123, 255); padding: 10px; border: none; border-radius: 5px; cursor: pointer;" onclick="document.getElementById('upload-data').click()">Upload File</button>
                        </div>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col">
                        <div class="table-responsive">
                            <table id="dataTable" class="table table-striped">
                                <thead>
                                    <!-- Table headers will be generated dynamically -->
                                </thead>
                                <tbody>
                                    <!-- Table body will be generated dynamically -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!---Help Modal-->
    <div class="modal fade" id="helpModal" tabindex="-1" aria-labelledby="HelpModal" aria-hidden="true" onchange="stopSpeaking()">
        <div class="modal-dialog modal-l modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ModalLabel">Help</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" onclick="stopSpeaking()"></button>
                </div>
                <div class="modal-body" id="modal-body">
                    <p><strong>Key Combination: Ctrl + Alt + S</strong></p>
                    <p><strong>Action:</strong> Toggles speech mode on and off.</p>
                    <p><strong>Description:</strong> This shortcut checks if the keys pressed are Ctrl, Alt, and 's'. If so, it toggles speech mode by checking the current state stored in a cookie and then either turns speech mode on or off accordingly.</p>
                    <hr>
                    <p><strong>Key Combination: Ctrl + Alt + U</strong></p>
                    <p><strong>Action:</strong> Triggers the click event of the element with the ID 'upload-data'.</p>
                    <p><strong>Description:</strong> This shortcut is used for triggering an upload action, possibly for uploading data or files.</p>
                    <hr>
                    <p><strong>Key Combination: Ctrl + Alt + R</strong></p>
                    <p><strong>Action:</strong> Toggles graphs on and off.</p>
                    <p><strong>Description:</strong> This shortcut toggles the visibility of graphs on the web page.</p>
                    <hr>
                    <p><strong>Key Combination: Ctrl + Alt + X</strong></p>
                    <p><strong>Action:</strong> Toggles the X-axis of graphs.</p>
                    <p><strong>Description:</strong> This shortcut toggles the X-axis display of the graphs.</p>
                    <hr>
                    <p><strong>Key Combination: Ctrl + Alt + Y</strong></p>
                    <p><strong>Action:</strong> Toggles the Y-axis of graphs.</p>
                    <p><strong>Description:</strong> This shortcut toggles the Y-axis display of the graphs.</p>
                    <hr>
                    <p><strong>Key Combination: Ctrl + Alt + Enter</strong></p>
                    <p><strong>Action:</strong> Calls a graph function.</p>
                    <p><strong>Description:</strong> This shortcut triggers a function that generates or updates a graph.</p>
                    <hr>
                    <p><strong>Key Combination: Ctrl + Alt + Arrow Right</strong></p>
                    <p><strong>Action:</strong> Updates the range value (likely for a slider or similar UI element) by incrementing it.</p>
                    <p><strong>Description:</strong> This shortcut is used to increment a range value, possibly for navigating through data or adjusting a parameter.</p>
                    <hr>
                    <p><strong>Key Combination: Ctrl + Alt + Arrow Left</strong></p>
                    <p><strong>Action:</strong> Updates the range value by decrementing it.</p>
                    <p><strong>Description:</strong> Similar to the previous shortcut, this one decrements the range value.</p>
                    <hr>
                    <p><strong>Key Combination: Ctrl + Alt + T</strong></p>
                    <p><strong>Action:</strong> Speaks out text content.</p>
                    <p><strong>Description:</strong> This shortcut, when pressed, speaks out the content of an element with the ID 'text-output', provided that speech mode is enabled.</p>
                    <hr>
                    <p><strong>Key Combination: Ctrl + Alt + C</strong></p>
                    <p><strong>Action:</strong> Swaps values.</p>
                    <p><strong>Description:</strong> This shortcut triggers a function to swap values, possibly within the application context.</p>
                    <hr>
                    <p><strong>Key Combination: Ctrl + Alt + M</strong></p>
                    <p><strong>Action:</strong> Stops speaking.</p>
                    <p><strong>Description:</strong> This shortcut stops any ongoing speech output.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="stopSpeaking()">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap core JavaScript-->
    <script src="./static/vendor/jquery/jquery.min.js"></script>
    <script src="./static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- Core plugin JavaScript-->
    <script src="./static/vendor/jquery-easing/jquery.easing.min.js"></script>
    <!-- Custom scripts for all pages-->
    <script src="./static/js/sb-admin-2.min.js"></script>

    <script>
        document.getElementById('upload-data').addEventListener('change', function(event) {
            const file = event.target.files[0];
            var finalData = [];
            var headerNames = [];
            var reader = new FileReader();

            if (file) {
                if (file.name.endsWith('.csv')) {
                    reader.onload = function(event) {
                        Papa.parse(event.target.result, {
                            complete: function(results) {
                                var filteredData = results.data.filter(row => row.some(cell => cell.trim() !== ''));
                                var parsedData = filteredData.map(row => row.map(cell => isNaN(cell) ? String(cell) : parseFloat(cell)));
                                parsedData.sort((a, b) => a[0] - b[0]);
                                headerNames = filteredData[0];
                                finalData = parsedData;
                                processData(finalData.slice(1), headerNames);
                            }
                        });
                    };
                    reader.readAsText(file);
                } else if (file.name.endsWith('.xlsx') || file.name.endsWith('.xls')) {
                    reader.onload = function(event) {
                        var data = new Uint8Array(event.target.result);
                        var workbook = XLSX.read(data, {
                            type: 'array'
                        });
                        var sheetName = workbook.SheetNames[0];
                        var sheet = workbook.Sheets[sheetName];
                        var excelData = XLSX.utils.sheet_to_json(sheet, {
                            header: 1
                        });

                        var filteredData = excelData.filter(row => row.some(cell => String(cell).trim() !== ''));
                        var parsedData = filteredData.map(row => row.map(cell => isNaN(cell) ? String(cell) : parseFloat(cell)));
                        parsedData.sort((a, b) => a[0] - b[0]);
                        headerNames = filteredData[0];
                        finalData = parsedData;
                        processData(finalData.slice(1), headerNames);
                    };
                    reader.readAsArrayBuffer(file);
                } else {
                    console.error('Unsupported file format');
                }
            }
        });

        function processData(data, headers) {
            const tbody = document.querySelector('#dataTable tbody');
            const thead = document.querySelector('#dataTable thead');

            // Create table headers
            let headerHTML = '';
            headers.forEach(header => {
                headerHTML += `<th scope="col">${header}</th>`;
            });
            thead.innerHTML = `<tr>${headerHTML}</tr>`;

            // Create table rows
            let tbodyHTML = '';
            data.forEach(rowData => {
                let rowHTML = '';
                rowData.forEach(data => {
                    rowHTML += `<td>${data}</td>`;
                });
                tbodyHTML += `<tr>${rowHTML}</tr>`;
            });
            tbody.innerHTML = tbodyHTML;
        }
    </script>

    <script src="./static/js/knobs.min.js"></script>
    <script src="./static/js/knobs.js"></script>
</body>

</html>